# CRM –æ—Ñ—Ñ–µ—Ä–æ–≤ (React + Supabase)

–ü—Ä–æ—Å—Ç–æ–π —Å–∞–π—Ç-CRM –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ –ø–æ–∏—Å–∫–∞ –æ—Ñ—Ñ–µ—Ä–æ–≤ –ø–æ –ø–æ–ª—è–º: **–≤–µ—Ä—Ç–∏–∫–∞–ª—å, —Å–µ—Ç—Ç–ª, —Å—Ç–∞–≤–∫–∞, –æ–±—ä—ë–º, –¥–∞—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç—Ä–∞—Ö–æ–≤–æ–π**.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–¥–ª—è ¬´—á–∞–π–Ω–∏–∫–∞¬ª)

1) –°–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç –≤ Supabase: https://supabase.com/  
   - Project Name: –ª—é–±–æ–µ
   - Database Password: –∑–∞–ø–æ–º–Ω–∏
   - –ñ–¥—ë—à—å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –∑–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π **Project settings ‚Üí API** –∏ —Å–∫–æ–ø–∏—Ä—É–π:
     - `Project URL`
     - `anon public` –∫–ª—é—á

2) –í Supabase —Å–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É (SQL Editor ‚Üí New query) –∏ –∑–∞–ø—É—Å—Ç–∏:

```sql
create table if not exists public.offers (
  id bigint generated by default as identity primary key,
  vertical text,
  settle text,
  rate numeric,
  volume numeric,
  date date,
  title text,
  insurance boolean default false,
  inserted_at timestamp with time zone default now()
);
-- –í–∫–ª—é—á–∞–µ–º RLS (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫)
alter table public.offers enable row level security;

-- –ü–æ–ª–∏—Ç–∏–∫–∞: —Ä–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –≤—Å–µ–º –∞–Ω–æ–Ω–∏–º–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º,
-- –µ—Å–ª–∏ —Å–∞–π—Ç –ø—É–±–ª–∏—á–Ω—ã–π. –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å–º–æ—Ç—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ.
create policy "Public read" on public.offers for select using (true);
create policy "Public insert" on public.offers for insert with check (true);
create policy "Public delete" on public.offers for delete using (true);
```

> **–í–∞–∂–Ω–æ:** —Ç–∞–∫–∏–µ –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ç–µ—Å—Ç–∞ –∏–ª–∏ –µ—Å–ª–∏ —Å–∞–π—Ç –Ω–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π.  
> –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è**, –∏—Å–ø–æ–ª—å–∑—É–π Supabase Auth (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å) –∏ –ø—Ä–∏–≤—è–∂–∏ user_id –∫ –∑–∞–ø–∏—Å—è–º.
> –ü—Ä–∏–º–µ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ —Å–º. –≤–Ω–∏–∑—É —Ñ–∞–π–ª–∞.

3) –°–∫–∞—á–∞–π —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç, —Ä–∞—Å–ø–∞–∫—É–π. –í —Ñ–∞–π–ª–µ `.env` –ø—Ä–æ–ø–∏—à–∏:

```
VITE_SUPABASE_URL=–í–ê–®_URL
VITE_SUPABASE_ANON_KEY=–í–ê–®_ANON_KEY
```

4) –£—Å—Ç–∞–Ω–æ–≤–∏ Node.js LTS: https://nodejs.org/  
   –û—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏:

```bash
npm install
npm run dev
```

–ü–µ—Ä–µ–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª (–æ–±—ã—á–Ω–æ http://localhost:5173).  
–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è CRM —Å–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ —Ñ–æ—Ä–º–æ–π.

5) –î–µ–ø–ª–æ–π (—á—Ç–æ–±—ã —Å–∞–π—Ç –±—ã–ª –≤—Å–µ–≥–¥–∞ –æ–Ω–ª–∞–π–Ω) –Ω–∞ **Vercel**: https://vercel.com
   - New Project ‚Üí Import (–∑–∞–≥—Ä—É–∑–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤ GitHub, –∑–∞—Ç–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π)
   - –í **Environment Variables** –¥–æ–±–∞–≤—å `VITE_SUPABASE_URL` –∏ `VITE_SUPABASE_ANON_KEY`
   - Deploy

–ì–æ—Ç–æ–≤–æ üéâ

---

## üîê –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–ª —Ç–æ–ª—å–∫–æ —Ç—ã:
1. –í–∫–ª—é—á–∏ **Authentication** –≤ Supabase (Email/password).  
2. –î–æ–±–∞–≤—å –≤ —Ç–∞–±–ª–∏—Ü—É –∫–æ–ª–æ–Ω–∫—É `user_id uuid` (nullable), –∏ –Ω–∞–ø–æ–ª–Ω–∏ –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ–º `auth.uid()` –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ.
3. –ü–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –ü—Ä–∏–≤—è–∂–µ–º –∑–∞–ø–∏—Å–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
alter table public.offers add column user_id uuid;
update public.offers set user_id = auth.uid() where user_id is null; -- –¥–ª—è —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

-- –ü–æ–ª–∏—Ç–∏–∫–∏: –∫–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏
drop policy if exists "Public read" on public.offers;
drop policy if exists "Public insert" on public.offers;
drop policy if exists "Public delete" on public.offers;

create policy "Users can read own" on public.offers
for select using (auth.uid() = user_id);

create policy "Users can insert own" on public.offers
for insert with check (auth.uid() = user_id);

create policy "Users can delete own" on public.offers
for delete using (auth.uid() = user_id);
```

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –¥–æ–±–∞–≤–ª—è–π `user_id` –∏–∑ `supabase.auth.getUser()`.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
crm-offers-supabase/
  public/
  src/
    App.jsx         ‚Äî UI: —Ñ–æ—Ä–º–∞, —Ñ–∏–ª—å—Ç—Ä—ã, —Ç–∞–±–ª–∏—Ü–∞
    main.jsx        ‚Äî –≤—Ö–æ–¥
    supabase.js     ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
  index.html        ‚Äî –±–∞–∑–æ–≤–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∏ —Å—Ç–∏–ª–∏
  package.json      ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
  vite.config.js    ‚Äî –∫–æ–Ω—Ñ–∏–≥ Vite
  .env.example      ‚Äî –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## ‚úÖ –ß—Ç–æ —É–∂–µ —É–º–µ–µ—Ç
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–∞ (–≤—Å–µ –ø–æ–ª—è)
- –ü–æ–∏—Å–∫/—Ñ–∏–ª—å—Ç—Ä—ã: –≤–µ—Ä—Ç–∏–∫–∞–ª—å, —Å–µ—Ç—Ç–ª, –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞ ¬´—Å/–ø–æ¬ª, —Å—Ç–∞–≤–∫–∏/–æ–±—ä—ë–º ¬´–æ—Ç/–¥–æ¬ª, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞
- –õ—ë–≥–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ + —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- –ú–∏–Ω–∏-–º–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—É–º–º–∞ –æ–±—ä—ë–º–∞, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞–≤–∫–∞

## üí° –ò–¥–µ–∏ –Ω–∞ –ø–æ—Ç–æ–º
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª–µ–π/—Å–µ—Ç—Ç–ª–æ–≤ (–≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏)
```

